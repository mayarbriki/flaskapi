<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FIFA Player Recommender</title>
  <link rel="stylesheet" href="/static/styles.css" />
</head>
<body>
  <!-- Sidebar -->
  <div class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <h2>FIFA Tools</h2>
    </div>

    <nav class="sidebar-nav">
      <a href="#search" onclick="scrollToSection('search-form')">Player Search</a>
      <a href="#recommendations" onclick="scrollToSection('recommendations')">Recommendations</a>
      <a href="#browse" onclick="scrollToSection('browse')">Browse Players</a>
      <a href="#topstats" onclick="scrollToSection('topstats')">Top Players</a>
      <a href="#compare" onclick="scrollToSection('compare')">Compare</a>
      <a href="#anomalies" onclick="scrollToSection('anomalies')">Anomalies</a>
      <a href="#histogram" onclick="scrollToSection('histogram')">Histogram</a>
      <a href="#scout" onclick="scrollToSection('scout')">AI Scout Report</a>
      <a href="#roleclass" onclick="scrollToSection('roleclass')">AI Role Classification</a>
      <a href="#predict" onclick="scrollToSection('predict')">Predict Overall</a>
      <a href="#about" onclick="showAbout()">About</a>
    </nav>
  </div>

  <!-- Toggle Button -->
  <button class="sidebar-toggle" id="sidebarToggle">☰</button>

  <div class="container">
    <div class="topbar card" style="display:flex;justify-content:space-between;align-items:center;gap:1rem;">
      <h1 style="margin:0;">FIFA Player Recommender</h1>
      <div>
        <span id="nav-user"></span>
        <button id="nav-logout" type="button">Logout</button>
      </div>
    </div>
    <div id="recommendations" class="card" data-protected="1">
      <h2>Recommendations & Compare — Recommendations</h2>
      <form id="search-form" onsubmit="return false;">
        <div class="grid grid-3">
          <div class="field">
            <label for="player">Player</label>
            <input id="player" name="player" type="text" placeholder="Start typing a player name..." list="player-list" autocomplete="off" />
            <datalist id="player-list"></datalist>
          </div>
          <div class="field">
            <label for="position">Position (optional)</label>
            <input id="position" name="position" type="text" placeholder="e.g., ST, LW, RW" />
          </div>
          <div class="actions" style="align-self:end;">
            <button id="recommend-btn" type="button">Get Recommendations</button>
          </div>
        </div>
      </form>
      <div id="results">
        <div id="error" class="error" hidden></div>
        <table id="results-table" hidden>
          <thead>
            <tr>
              <th>Name</th>
              <th>Nationality</th>
              <th>Overall</th>
              <th>Value (€)</th>
              <th>Positions</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>

    <div id="browse" class="card" data-protected="1">
      <h2>Players Management — Browse & Export</h2>
      <form id="browse-form" onsubmit="return false;">
        <div class="grid grid-3">
          <div class="field">
            <label for="bp-q">Search</label>
            <input id="bp-q" type="text" placeholder="Name contains..." />
          </div>
          <div class="field">
            <label for="bp-nationality">Nationality</label>
            <input id="bp-nationality" list="nationality-list" placeholder="Country" />
          </div>
          <div class="field">
            <label for="bp-position">Position</label>
            <input id="bp-position" placeholder="e.g., ST, LW" />
          </div>
        </div>
        <div class="grid grid-3">
          <div class="field">
            <label>Overall</label>
            <div class="grid">
              <input id="bp-min-overall" type="number" placeholder="Min" min="1" max="99" />
              <input id="bp-max-overall" type="number" placeholder="Max" min="1" max="99" />
            </div>
          </div>
          <div class="field">
            <label>Age</label>
            <div class="grid">
              <input id="bp-min-age" type="number" placeholder="Min" min="15" max="50" />
              <input id="bp-max-age" type="number" placeholder="Max" min="15" max="50" />
            </div>
          </div>
          <div class="field">
            <label>Value (€)</label>
            <div class="grid">
              <input id="bp-min-value" type="number" placeholder="Min" min="0" step="100000" />
              <input id="bp-max-value" type="number" placeholder="Max" min="0" step="100000" />
            </div>
          </div>
        </div>
        <div class="grid grid-3">
          <div class="field">
            <label for="bp-sort">Sort</label>
            <select id="bp-sort">
              <option value="name">Name ↑</option>
              <option value="-name">Name ↓</option>
              <option value="overall_rating">Overall ↑</option>
              <option value="-overall_rating">Overall ↓</option>
              <option value="value_euro">Value ↑</option>
              <option value="-value_euro">Value ↓</option>
              <option value="age">Age ↑</option>
              <option value="-age">Age ↓</option>
            </select>
          </div>
          <div class="field">
            <label for="bp-page-size">Page Size</label>
            <select id="bp-page-size">
              <option>10</option>
              <option selected>20</option>
              <option>50</option>
              <option>100</option>
            </select>
          </div>
          <div class="actions" style="align-self:end;">
            <button id="bp-apply" type="button">Apply Filters</button>
            <button id="bp-export" type="button">Export CSV</button>
            <button id="bp-semantic" type="button">Semantic Search</button>
          </div>
        </div>
      </form>
      <div id="bp-error" class="error" hidden></div>
      <table id="bp-table" hidden>
        <thead>
          <tr>
            <th>Name</th>
            <th>Nationality</th>
            <th>Overall</th>
            <th>Age</th>
            <th>Value (€)</th>
            <th>Positions</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
      <div id="bp-pager" class="pager" hidden>
        <button id="bp-prev" type="button">Prev</button>
        <span id="bp-info"></span>
        <button id="bp-next" type="button">Next</button>
      </div>
    </div>

    <div id="topstats" class="card" data-protected="1">
      <h2>Analytics & Insights — Top Players</h2>
      <form id="top-form" onsubmit="return false;">
        <div class="grid grid-3">
          <div class="field">
            <label for="ts-stat">Metric</label>
            <select id="ts-stat">
              <option value="overall_rating">overall_rating</option>
              <option value="potential">potential</option>
              <option value="value_euro">value_euro</option>
              <option value="wage_euro">wage_euro</option>
              <option value="sprint_speed">sprint_speed</option>
              <option value="acceleration">acceleration</option>
              <option value="dribbling">dribbling</option>
            </select>
          </div>
          <div class="field">
            <label for="ts-n">Top N</label>
            <input id="ts-n" type="number" min="1" max="100" value="10" />
          </div>
          <div class="field">
            <label for="ts-position">Position</label>
            <input id="ts-position" placeholder="e.g., ST, RW" />
          </div>
        </div>
        <div class="grid grid-3">
          <div class="field">
            <label for="ts-nationality">Nationality</label>
            <input id="ts-nationality" list="nationality-list" placeholder="Country" />
          </div>
          <div class="actions" style="align-self:end;">
            <button id="ts-apply" type="button">Show Top</button>
          </div>
        </div>
      </form>
      <div id="ts-error" class="error" hidden></div>
      <table id="ts-table" hidden>
        <thead>
          <tr>
            <th>Name</th>
            <th>Nationality</th>
            <th>Positions</th>
            <th>Overall</th>
            <th>Value (€)</th>
            <th>Metric Value</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <div id="compare" class="card" data-protected="1">
      <h2>Recommendations & Compare — Compare</h2>
      <form id="compare-form" onsubmit="return false;">
        <div class="grid grid-3">
          <div class="field">
            <label for="cp-players">Players</label>
            <input id="cp-players" placeholder="Comma-separated names" />
          </div>
          <div class="field">
            <label for="cp-metrics">Metrics</label>
            <input id="cp-metrics" placeholder="e.g., overall_rating,potential,sprint_speed" />
          </div>
          <div class="actions" style="align-self:end;">
            <button id="cp-apply" type="button">Compare</button>
          </div>
        </div>
      </form>
      <div id="cp-error" class="error" hidden></div>
      <table id="cp-table" hidden>
        <thead>
          <tr id="cp-head-row">
            <th>Name</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
      <div class="actions" style="margin-top:.5rem;">
        <button id="cp-explain" type="button">Explain Comparison</button>
      </div>
      <div id="cp-explain-error" class="error" hidden></div>
      <pre id="cp-explain-out" class="report" hidden></pre>
    </div>

    <div id="anomalies" class="card" data-protected="1">
      <h2>Analytics & Insights — Anomaly Detection</h2>
      <form id="an-form" onsubmit="return false;">
        <div class="grid grid-3">
          <div class="field">
            <label for="an-n">Top N</label>
            <input id="an-n" type="number" min="1" max="200" value="20" />
          </div>
          <div class="field">
            <label for="an-position">Position</label>
            <input id="an-position" placeholder="e.g., ST, CB" />
          </div>
          <div class="field">
            <label for="an-nationality">Nationality</label>
            <input id="an-nationality" list="nationality-list" placeholder="Country" />
          </div>
        </div>
        <div class="actions">
          <button id="an-apply" type="button">Detect Anomalies</button>
        </div>
      </form>
      <div id="an-error" class="error" hidden></div>
      <table id="an-table" hidden>
        <thead>
          <tr>
            <th>Name</th>
            <th>Nationality</th>
            <th>Positions</th>
            <th>Overall</th>
            <th>Value (€)</th>
            <th>Age</th>
            <th>Anomaly Score</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <div id="histogram" class="card" data-protected="1">
      <h2>Analytics & Insights — Histogram</h2>
      <form id="hg-form" onsubmit="return false;">
        <div class="grid grid-3">
          <div class="field">
            <label for="hg-stat">Metric</label>
            <input id="hg-stat" value="overall_rating" />
          </div>
          <div class="field">
            <label for="hg-bins">Bins</label>
            <input id="hg-bins" type="number" min="2" max="200" value="20" />
          </div>
          <div class="field">
            <label for="hg-position">Position</label>
            <input id="hg-position" placeholder="e.g., ST" />
          </div>
        </div>
        <div class="grid grid-3">
          <div class="field">
            <label for="hg-nationality">Nationality</label>
            <input id="hg-nationality" list="nationality-list" placeholder="Country" />
          </div>
          <div class="actions" style="align-self:end;">
            <button id="hg-apply" type="button">Show Histogram</button>
          </div>
        </div>
      </form>
      <div id="hg-error" class="error" hidden></div>
      <pre id="hg-output" class="report" hidden></pre>
      <canvas id="hg-canvas" width="800" height="300"></canvas>
    </div>

    <div id="scout" class="card" data-protected="1">
      <h2>AI Scout Report</h2>
      <form id="scout-form" onsubmit="return false;">
        <div class="field">
          <label for="sr-player">Player</label>
          <input id="sr-player" type="text" placeholder="Start typing a player name..." list="player-list" autocomplete="off" />
        </div>
        <div class="grid">
          <div class="field">
            <label for="sr-lang">Target Language</label>
            <select id="sr-lang">
              <option>English</option>
              <option>Spanish</option>
              <option>German</option>
              <option>Italian</option>
              <option>Portuguese</option>
              <option>Dutch</option>
              <option>Turkish</option>
              <option>Arabic</option>
              <option>French</option>
            </select>
          </div>
        </div>
        <div class="actions">
          <button id="scout-btn" type="button">Generate Report</button>
          <button id="translate-btn" type="button">Translate</button>
        </div>
        <div id="scout-error" class="error" hidden></div>
        <pre id="scout-output" class="report" hidden></pre>
        <div id="scout-trans-error" class="error" hidden></div>
        <pre id="scout-translation" class="report" hidden></pre>
        <div id="scout-provider" class="success" hidden></div>
      </form>
    </div>

    <div id="roleclass" class="card" data-protected="1">
      <h2>AI Assistant — Role Classification</h2>
      <form id="rc-form" onsubmit="return false;">
        <div class="grid">
          <div class="field" style="min-width:260px;">
            <label for="rc-player">Player</label>
            <input id="rc-player" list="player-list" placeholder="Start typing a player name..." />
          </div>
          <div class="field" style="flex:1;">
            <label for="rc-labels">Candidate Roles (optional, comma-separated)</label>
            <input id="rc-labels" placeholder="GK,CB,LB,RB,CDM,CM,CAM,LW,RW,ST" />
          </div>
          <div class="actions" style="align-self:end;">
            <button id="rc-run" type="button">Classify</button>
          </div>
        </div>
      </form>
      <div id="rc-error" class="error" hidden></div>
      <pre id="rc-out" class="report" hidden></pre>
    </div>

    <div id="predict" class="card" data-protected="1">
      <h2>Predict Overall</h2>
      <form id="predict-form" onsubmit="return false;">
        <div class="grid">
          <div class="field">
            <label for="pf-nationality">Nationality</label>
            <input id="pf-nationality" name="nationality" list="nationality-list" placeholder="Start typing a country" />
            <datalist id="nationality-list"></datalist>
          </div>
          <div class="field">
            <label for="pf-positions">Primary Position</label>
            <select id="pf-positions" name="positions"></select>
          </div>
          <div class="field">
            <label for="pf-foot">Preferred Foot</label>
            <select id="pf-foot" name="preferred_foot"></select>
          </div>
          <div class="field">
            <label for="pf-body">Body Type</label>
            <select id="pf-body" name="body_type"></select>
          </div>
        </div>

        <div class="grid grid-3">
          <div class="field">
            <label>Age: <span id="age-val">25</span></label>
            <input type="range" id="pf-age" name="age" min="16" max="45" value="25" />
          </div>
          <div class="field">
            <label>Height (cm): <span id="h-val">180</span></label>
            <input type="range" id="pf-height" name="height_cm" min="150" max="210" value="180" />
          </div>
          <div class="field">
            <label>Weight (kg): <span id="w-val">75</span></label>
            <input type="range" id="pf-weight" name="weight_kgs" min="50" max="110" value="75" />
          </div>
        </div>

        <h3>Key Attributes</h3>
        <div class="grid grid-3">
          <div class="field"><label>Acceleration: <span data-out="acceleration">80</span></label><input type="range" name="acceleration" min="1" max="99" value="80" /></div>
          <div class="field"><label>Sprint Speed: <span data-out="sprint_speed">82</span></label><input type="range" name="sprint_speed" min="1" max="99" value="82" /></div>
          <div class="field"><label>Agility: <span data-out="agility">78</span></label><input type="range" name="agility" min="1" max="99" value="78" /></div>
          <div class="field"><label>Reactions: <span data-out="reactions">75</span></label><input type="range" name="reactions" min="1" max="99" value="75" /></div>
          <div class="field"><label>Balance: <span data-out="balance">70</span></label><input type="range" name="balance" min="1" max="99" value="70" /></div>
          <div class="field"><label>Shot Power: <span data-out="shot_power">85</span></label><input type="range" name="shot_power" min="1" max="99" value="85" /></div>
          <div class="field"><label>Stamina: <span data-out="stamina">70</span></label><input type="range" name="stamina" min="1" max="99" value="70" /></div>
          <div class="field"><label>Strength: <span data-out="strength">65</span></label><input type="range" name="strength" min="1" max="99" value="65" /></div>
          <div class="field"><label>Long Shots: <span data-out="long_shots">72</span></label><input type="range" name="long_shots" min="1" max="99" value="72" /></div>
          <div class="field"><label>Positioning: <span data-out="positioning">68</span></label><input type="range" name="positioning" min="1" max="99" value="68" /></div>
          <div class="field"><label>Vision: <span data-out="vision">65</span></label><input type="range" name="vision" min="1" max="99" value="65" /></div>
          <div class="field"><label>Penalties: <span data-out="penalties">60</span></label><input type="range" name="penalties" min="1" max="99" value="60" /></div>
          <div class="field"><label>Composure: <span data-out="composure">70</span></label><input type="range" name="composure" min="1" max="99" value="70" /></div>
          <div class="field"><label>Crossing: <span data-out="crossing">65</span></label><input type="range" name="crossing" min="1" max="99" value="65" /></div>
          <div class="field"><label>Finishing: <span data-out="finishing">70</span></label><input type="range" name="finishing" min="1" max="99" value="70" /></div>
          <div class="field"><label>Heading Accuracy: <span data-out="heading_accuracy">60</span></label><input type="range" name="heading_accuracy" min="1" max="99" value="60" /></div>
          <div class="field"><label>Short Passing: <span data-out="short_passing">72</span></label><input type="range" name="short_passing" min="1" max="99" value="72" /></div>
          <div class="field"><label>Volleys: <span data-out="volleys">58</span></label><input type="range" name="volleys" min="1" max="99" value="58" /></div>
          <div class="field"><label>Dribbling: <span data-out="dribbling">74</span></label><input type="range" name="dribbling" min="1" max="99" value="74" /></div>
          <div class="field"><label>Curve: <span data-out="curve">60</span></label><input type="range" name="curve" min="1" max="99" value="60" /></div>
          <div class="field"><label>Free Kick Accuracy: <span data-out="freekick_accuracy">55</span></label><input type="range" name="freekick_accuracy" min="1" max="99" value="55" /></div>
          <div class="field"><label>Long Passing: <span data-out="long_passing">68</span></label><input type="range" name="long_passing" min="1" max="99" value="68" /></div>
          <div class="field"><label>Ball Control: <span data-out="ball_control">73</span></label><input type="range" name="ball_control" min="1" max="99" value="73" /></div>
        </div>

        <div class="actions">
          <button id="predict-btn" type="submit">Predict Overall</button>
        </div>
        <div id="predict-error" class="error" hidden></div>
        <div id="predict-output" class="success" hidden></div>
      </form>
    </div>
  </div>

  <!-- Player Detail Modal -->
  <div id="player-detail" class="modal" hidden>
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="pd-title">Player Detail</h3>
        <button id="pd-close" type="button" class="close">×</button>
      </div>
      <div id="pd-body" class="modal-body"></div>
      <div class="modal-footer">
        <button id="pd-classify" type="button">Classify Role</button>
        <div id="pd-classify-error" class="error" hidden></div>
      </div>
    </div>
  </div>

  <div id="qa" class="card">
    <h2>Dataset Q&A</h2>
    <form id="qa-form" onsubmit="return false;">
      <div class="grid">
        <div class="field" style="flex:1;">
          <label for="qa-q">Ask a question</label>
          <input id="qa-q" placeholder="e.g., Who are the top young ST by sprint_speed?" />
        </div>
        <div class="actions" style="align-self:end;">
          <button id="qa-ask" type="button">Ask</button>
        </div>
      </div>
    </form>
    <div id="qa-error" class="error" hidden></div>
    <pre id="qa-out" class="report" hidden></pre>
  </div>

  <script src="/static/app.js"></script>
</body>
</html>
